<!-- default badges list -->
![](https://img.shields.io/endpoint?url=https://codecentral.devexpress.com/api/v1/VersionRange/128635871/15.2.4%2B)
[![](https://img.shields.io/badge/Open_in_DevExpress_Support_Center-FF7200?style=flat-square&logo=DevExpress&logoColor=white)](https://supportcenter.devexpress.com/ticket/details/E4176)
[![](https://img.shields.io/badge/ðŸ“–_How_to_use_DevExpress_Examples-e9f6fc?style=flat-square)](https://docs.devexpress.com/GeneralInformation/403183)
[![](https://img.shields.io/badge/ðŸ’¬_Leave_Feedback-feecdd?style=flat-square)](#does-this-example-address-your-development-requirementsobjectives)
<!-- default badges end -->
# How to provide the capability to bind appointment labels to a datasource


<p>Due to numerous requests from our customers regarding the capability to bind appointment labels/statuses to a datasource, we have created this sample. Note that in the past, we tried to address this issue in the context of the following examples:</p><p><a href="https://www.devexpress.com/Support/Center/p/E2028">Obtain labels from a datasource like the resources</a><br />
<a href="https://www.devexpress.com/Support/Center/p/E2087">How to obtain labels from a datasource and handle deleted labels</a></p><p>They illustrate how to load labels form an external datasource. However, one limitation is still there. It is related to the default meaning of the <a href="http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraSchedulerAppointment_LabelIdtopic"><u>Appointment.LabelId Property</u></a>. The value of this property represents an index of a label in the <a href="http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerAppointmentStorage_Labelstopic"><u>AppointmentStorage.Labels</u></a> (this label is used for this appointment).This mean that once you remove a particular label for this collection, indexes will be shifted. Take a moment to look at the <a href="https://www.devexpress.com/Support/Center/p/Q413689">Label and Status for Appointment when loading from a database - problem with LabelID and StatusID - how to keep track of correct item?</a> ticket, which describes this issue in detail.</p><p>Apparently, a more advanced labels/status identification mechanism is required. This example illustrates how to implement this mechanism for labels (you can use the same approach for statuses) by extending the <a href="http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraSchedulerSchedulerControltopic"><u>SchedulerControl Class</u></a>. The main idea of the approach illustrated here is to define a separate datasource for appointment labels (the <strong>LabelsDataSource </strong>property) and mapped field names for Id, Color and DisplayName (the <strong>LabelIdMappedName</strong>, <strong>LabelColorMappedName </strong>and <strong>LabelDisplayNameMappedName </strong>properties). If the datasource is not specified, we are using default label items (see the <strong>PopulateDefaultLabels()</strong> method). Otherwise, labels from a datasource are used. Note that the <strong>Appointment.LabelId</strong> property has another meaning in this scenario. The value of this property is used to look up a corresponding label item in the <a href="http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerSchedulerControl_AppointmentViewInfoCustomizingtopic"><u>SchedulerControl.AppointmentViewInfoCustomizing Event</u></a> in order to assign a color defined in this label to the appointment. In addition, we handle the <a href="http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerSchedulerControl_PopupMenuShowingtopic"><u>SchedulerControl.PopupMenuShowing Event</u></a> to populate the <strong>LabelSubMenu </strong>with custom menu items created on the fly based on the rows in the datasource with labels.</p><p>To correctly display custom appointments' labels in the EditAppointmentForm, we override the <strong>UpdateFormCore</strong> and <strong>edtLabel_EditValueChanged</strong> methods in a corresponding EditAppointmentForm descendant. The important thing is that a SchedulerStorage instance should contain custom appointments' labels in its internal collection. We use the <strong>SchedulerControl.PopulateLabelsStorage</strong> method to replace the collection of pre-defined labels with a custom one.</p><p><br />
Note that we are using a custom-made <strong>DataBindingController </strong>class to operate with a label datasource in a generic manner. This means that our approach should work correctly regardless of the actual datasource type, be it a <strong>DataTable </strong>or a <strong>List<T></strong>.</p><p>Here is a screenshot that illustrates meaning of the <strong>Appointment.LabelId</strong> property (pay attention to the CarScheduling.Label and Labels.Id field values):</p><p><img src="https://raw.githubusercontent.com/DevExpress-Examples/how-to-provide-the-capability-to-bind-appointment-labels-to-a-datasource-e4176/15.2.4+/media/cb5f7a6b-67ff-4c91-ae66-46e0170e827d.png"></p><p>Finally, we have implemented design-time support for the aforementioned properties:</p><p><img src="https://raw.githubusercontent.com/DevExpress-Examples/how-to-provide-the-capability-to-bind-appointment-labels-to-a-datasource-e4176/15.2.4+/media/1bfdbce8-4b12-4e40-b065-f14441247c61.png"></p>

<br/>


<!-- feedback -->
## Does this example address your development requirements/objectives?

[<img src="https://www.devexpress.com/support/examples/i/yes-button.svg"/>](https://www.devexpress.com/support/examples/survey.xml?utm_source=github&utm_campaign=how-to-provide-the-capability-to-bind-appointment-labels-to-a-datasource-e4176&~~~was_helpful=yes) [<img src="https://www.devexpress.com/support/examples/i/no-button.svg"/>](https://www.devexpress.com/support/examples/survey.xml?utm_source=github&utm_campaign=how-to-provide-the-capability-to-bind-appointment-labels-to-a-datasource-e4176&~~~was_helpful=no)

(you will be redirected to DevExpress.com to submit your response)
<!-- feedback end -->
